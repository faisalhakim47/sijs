"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.si={})})(void 0,function(a){"use strict";function b(a,b){for(var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.whatToShow,e=void 0===d?5:d,f=c.acceptNode,g=void 0===f?function(){return 1}:f,h=document.createTreeWalker(a,e,{acceptNode:g},!1),i=-1,j=!0,k=function(){return j=!1};h.nextNode()&&j;)i++,b(h.currentNode,i,k)}function c(a){var b=t.get(a);if(b)return b;var c=new u(a);return t.set(a,c),c}var d="__sim__",e="__sip__",f="__sii__",g="__siie__",h=function(){function a(){_classCallCheck(this,a),this.keys=[],this.values=[]}return _createClass(a,[{key:"set",value:function(a,b){this.keys.push(a),this.values.push(b)}},{key:"get",value:function(a){return this.values[this.keys.indexOf(a)]}},{key:"remove",value:function(a){var b=this.keys.indexOf(a);this.keys.splice(b,1),this.values.splice(b,1)}}]),a}(),i=function a(b){_classCallCheck(this,a),this.nodeIndex=b},j=function(a){function b(a,c,d){_classCallCheck(this,b);var e=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return e.attributeName=c,e.staticParts=d,e}return _inherits(b,a),b}(i),k=function(a){function b(a){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return _inherits(b,a),b}(i),l=function(a){function b(a,c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.eventName=c,d}return _inherits(b,a),b}(i),m=function(a){function b(a){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return _inherits(b,a),b}(i),n=function(){function a(){_classCallCheck(this,a),this.numberOfPart=1}return _createClass(a,[{key:"update",value:function(){}}]),a}(),o=function(a){function b(a,c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.node=a.parentElement,d.attribute=a,d.staticParts=c,d.oldValue="",d.numberOfPart=c.length-1,d}return _inherits(b,a),_createClass(b,[{key:"update",value:function(a){var b=this.staticParts.length;if(1===b&&"boolean"==typeof a[0])a[0]?this.node.removeAttributeNode(this.attribute):this.node.setAttributeNode(this.attribute);else{for(var c="",d=0;d<b;d++)c+=this.staticParts[d]+(a[d]||"");c!==this.oldValue&&(this.attribute.nodeValue=c,this.oldValue=c)}}}]),b}(n),p=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.node=a,c.prevNode=a.previousSibling,c.nextNode=a.nextSibling,c.options={},a.removeAttribute(d),c}return _inherits(b,a),_createClass(b,[{key:"update",value:function(a){for(var b in a=a[0],a){var c=a[b];if("if"==b){if(c===this.options.if)continue;else c?c&&(this.nextNode.parentNode.insertBefore(this.node,this.nextNode),this.nextNode[g]=!0):(this.nextNode.parentNode.removeChild(this.node),this.nextNode[g]=!1);this.options.if=c}else if("elseIf"==b){var d=this.prevNode[g];if(c===this.options.elseIf&&d===this.options.prevIf)continue;!c||d?(this.nextNode.parentNode.removeChild(this.node),this.nextNode[g]=d):c&&(this.nextNode.parentNode.insertBefore(this.node,this.nextNode),this.nextNode[g]=!0),this.options.prevIf=d,this.options.elseIf=c}}}}]),b}(n),q=function(a){function b(a,c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.node=a,d.eventName=c,d.oldListener=null,a.removeAttribute("on"+c),d}return _inherits(b,a),_createClass(b,[{key:"update",value:function(a){a=a[0],a===this.oldListener||(this.oldListener&&this.node.removeEventListener(this.eventName,this.oldListener),a&&this.node.addEventListener(this.eventName,a),this.oldListener=a)}}]),b}(n),r=function(){function a(b,c){_classCallCheck(this,a),this.items=b,this.mapFn=c}return _createClass(a,[{key:"update",value:function(a,b,c){for(var d=c.parentNode,e=this.items.length,f=0;f<e;f++){var g=this.mapFn(this.items[f]),h=a.shift();h?g.render(h):d.insertBefore(g.compile().element,c)}for(var i;i=a.shift();)d.removeChild(i)}}]),a}(),s=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return null==a.previousSibling&&a.parentNode.insertBefore(document.createTextNode(""),a),null==a.nextSibling&&a.parentNode.appendChild(document.createTextNode("")),c.prevNode=a.previousSibling,c.nextNode=a.nextSibling,c}return _inherits(b,a),_createClass(b,[{key:"update",value:function(a){var b=a[0],c=this.prevNode.nextSibling;b instanceof w?b.render(c):b instanceof r?b.update(this.oldElements,this.prevNode,this.nextNode):b+""!==c.nodeValue&&(c.nodeValue=b)}},{key:"oldElements",get:function(){for(var a=this.prevNode.nextSibling,b=[];a!==this.nextNode;)b.push(a),a=a.nextSibling;return b}}]),b}(n),t=new h,u=function(){function a(c){_classCallCheck(this,a);var f=[],g=document.createElement("template");g.innerHTML=c.join(d);var h=[];b(g.content,function(a){for(var b=document.createDocumentFragment(),c=a.nodeValue.replace(/__sim__/g,d+e+d).split(d),f=c.length,g=0;g<f;g++)b.appendChild(document.createTextNode(c[g]));h.push(function(){a.parentNode.replaceChild(b,a)})},{whatToShow:4,acceptNode:function(a){return-1===a.nodeValue.indexOf(d)?3:1}}),h.forEach(function(a){return a()}),b(g.content,function(a,b){if(3===a.nodeType)return f.push(new m(b));for(var c,e=a.attributes.length,g=0;g<e;g++)c=a.attributes.item(g),c.name===d?f.push(new k(b)):"on"===c.name.slice(0,2)?f.push(new l(b,c.name.slice(2))):-1!==c.nodeValue.indexOf(d)&&f.push(new j(b,c.name,c.nodeValue.split(d)))},{acceptNode:function(a){return 3===a.nodeType?a.nodeValue===e?1:3:a.hasAttributes()?1:3}}),this.staticParts=c,this.templateElm=g,this.templateParts=f}return _createClass(a,[{key:"create",value:function(){var a=this,c=[],d=document.importNode(this.templateElm.content,!0);return b(d,function(b,d){for(var e,f=a.templateParts.length,g=0;g<f;g++)e=a.templateParts[g],e.nodeIndex===d&&(e instanceof m?c.push(new s(b)):e instanceof j?c.push(new o(b.attributes.getNamedItem(e.attributeName),e.staticParts)):e instanceof k?c.push(new p(b)):e instanceof l&&c.push(new q(b,e.eventName)))},{acceptNode:function(a){return 3===a.nodeType?a.nodeValue===e?1:3:a.hasAttributes()?1:3}}),new v(this.staticParts,d.children.item(0),c)}}]),a}(),v=function(){function a(b,c,d){_classCallCheck(this,a),this.staticParts=b,this.element=c,this.partUpdaters=d}return _createClass(a,[{key:"update",value:function(a){for(var b,c=0,d=0;b=this.partUpdaters[d++];)b.update(a.slice(c,c+=b.numberOfPart))}}]),a}(),w=function(){function a(b,c){_classCallCheck(this,a),this.staticParts=b,this.dymanicParts=c}return _createClass(a,[{key:"verify",value:function(a){return this.staticParts===a.staticParts}},{key:"compile",value:function(){var a=c(this.staticParts).create();return a.element[f]=a,a.update(this.dymanicParts),a}},{key:"render",value:function(a){var b=a[f];b instanceof v&&this.verify(b)?b.update(this.dymanicParts):a.parentNode.replaceChild(this.compile().element,a)}}]),a}();a.html=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return new w(a,c)},a.repeat=function(a,b){return new r(a,b)},Object.defineProperty(a,"__esModule",{value:!0})});